
&НаКлиенте
Процедура ПереченьМатериаловКоличествоПриИзменении(Элемент)
	СтрокаТабличнойЧасти = Элементы.ПереченьМатериалов.ТекущиеДанные;
	РаботаСДокументами.РасчитатьСумму(СтрокаТабличнойЧасти);
КонецПроцедуры

&НаКлиенте
Процедура ПереченьМатериаловЦенаПриИзменении(Элемент)
	СтрокаТабличнойЧасти = Элементы.ПереченьМатериалов.ТекущиеДанные;
	РаботаСДокументами.РасчитатьСумму(СтрокаТабличнойЧасти);
КонецПроцедуры

&НаКлиенте
Процедура ПереченьМатериаловМатериалПриИзменении(Элемент)
	СтрокаТабличнойЧасти=Элементы.ПереченьМатериалов.ТекущиеДанные;
	СтрокаТабличнойЧасти.Цена=РаботаСоСправочниками.РозничнаяЦена(Объект.Дата, СтрокаТабличнойЧасти.Материал);
	РаботаСДокументами.РасчитатьСумму(СтрокаТабличнойЧасти);
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьИнтерфейсСканирования(Команда)
	// Вставить содержимое обработчика.
	#Если МобильноеПриложениеКлиент  Тогда
		ОбработчикСканирования = Новый ОписаниеОповещения("ОбработкаСканирования", ЭтаФорма);
		ОбработчикЗакрытия = Новый ОписаниеОповещения("ОбработкаЗакрытияИнтерфейса", ЭтаФорма);
		СредстваМультимедиа.ПоказатьСканированиеШтрихКодов("Наведите камеру на штрихкод", ОбработчикСканирования, ОбработчикЗакрытия, ТипШтрихКода.Двухмерный);
	#КонецЕсли
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаСканирования(Штрихкод, Результат, Сообщение, ДополнительныеПараметры) Экспорт
	#Если МобильноеПриложениеКлиент  Тогда
		
		Если Результат Тогда
			ЗакрытьИнтерфейс=1;
		
			Текст = Строка(Штрихкод);
			Разделитель = ";";
			СтрокаШтрихкод = СтрЗаменить(Текст,Разделитель,Символы.ПС);
			Для Индекс= 1 По СтрЧислоСтрок(СтрокаШтрихкод) Цикл
				Сообщить(СтрПолучитьСтроку(СтрокаШтрихкод,Индекс));
				Элементы.ПереченьМатериалов.ДобавитьСтроку();
				Элементы.ПереченьМатериаловМатериал=СтрПолучитьСтроку(СтрокаШтрихкод,Индекс);
			КонецЦикла;
			
			
			
		Иначе
			Текст = "Ошибка: " + Сообщение;
		КонецЕсли;
		Если ЗакрытьИнтерфейс Тогда
			СредстваМультимедиа.ЗакрытьСканированиеШтрихКодов();
		КонецЕсли;
		Сообщить(Текст);
	#КонецЕсли
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаЗакрытияИнтерфейса(ДополнительныеПараметры) Экспорт
	Сообщить("Закрывается интерфейс сканирования");
КонецПроцедуры

